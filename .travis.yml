language: generic
before_install:
- sudo apt-get install texlive-binaries
- chmod +x .travis/git-info-2.sh
- ".travis/git-info-2.sh"
install:
- export PATH="$HOME/miniconda/bin:$PATH"
- if ! command -v conda > /dev/null; then wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; bash miniconda.sh -b -p $HOME/miniconda -u; conda config --add
  channels conda-forge; conda config --set always_yes yes; conda install tectonic==0.1.11;
  fi
- conda install -c malramsay biber==2.11 --yes
- conda info -a
cache:
  directories:
  - "$HOME/miniconda"
  - "$HOME/.cache/Tectonic"
script:
- cd ./src/
- tectonic --keep-intermediates --print ./git-info-2-mwe.tex
- cd ../
deploy:
  provider: releases
  api_key:
    secure: hsM2WCAgHUOT3LE2CVfhkeAbC5eT8n+WoNhd7SoMq7rVz0P0LgjioPxZxxxeJ5xSLvHU/PZcDlbHJ4GILLod8k+iVE2HmScxUvUzWOVuuDHVzr3Pvzj56Jws8yPzLli1MthDf31bKWwcLG5l4lHy91QkzHLLgqDykmg4a/cf+rrQUB95ZK3FTLp4sVAsNv5/E4EjGUER2B6zPGiM364971FeJGcoNBQ//LdZmJMGf+nQbG6YgrxL44uUgAeTrmoTtd5OxZQmLba8ej2x8BoNXtC64qf+9q4un0YErBmV1HZNNxkK0U5vXYXj3KhQnhs9tkyRt17mAyr3XSfg9iqf8NltAIAfDyvt+gOIovYVW9gflcBAeV8hHA1BpKzFPRUOtt0DGBA0iFNTNTaswKtFuGjcG1kJvQRjfUlB/atvkBdE8QBqGxE1ATdHbuefgyR8bgXOm9VlBGVouUQ4/2XKKh5UauRAZ/Ev+r2PQsqAiQ0S1y31au1SxTG2zxAeX5A7nIdu1l8Iqef6CfGmhDxPT2TdcI1aaG8IhgRncaKBCs+iMpTfhla1r1VOMN3H2juPzZvzrN8OgeXDVWvfv3zVyVjmx+MBjqS5kaoC84II9MaOg5O/77ir/5IpCuSm2m/z5MbP+yCv/L0MA2w+s+/5SpBAWJkSxIojDIC3+JtNSXA=
  file: "./src/git-info-2-mwe.pdf"
  skip_cleanup: true
  on:
    repo: PHPirates/travis-ci-latex-pdf
    branch: gitinfo2
